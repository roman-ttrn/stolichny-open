{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Продуктовый магазин</title>
    <link rel="stylesheet" href="{% static 'store/css/style.css' %}">
    <link rel="stylesheet" href="{% static "store/css/product_card1.css" %}">
    <link rel="stylesheet" href="{% static "store/css/navbar.css" %}">
    <link rel="stylesheet" href="{% static "store/css/catalog.css" %}">
    <link rel="stylesheet" href="{% static "store/css/categories.css" %}">
    <link rel="stylesheet" href="{% static "store/css/style.css" %}">
    <link rel="stylesheet" href="{% static "store/css/promo.css" %}">
    <link rel="stylesheet" href="{% static "store/css/checkout.css" %}">
    <link rel="stylesheet" href="{% static 'store/css/cart1.css' %}">
    {% csrf_token %}
</head>
<body>
    {% include "store/navbar.html" %}
    <form id="csrf-form" style="display:none;">
        {% csrf_token %}
      </form>      
    <main>

        <div class="notification-container">
                        {% for message in messages %}
                        <div class="notification notification-{{ message.tags }}">
                            <span class="notification-icon">
                                {% if message.tags == 'success' %}✓
                                {% elif message.tags == 'error' %}✕
                                {% elif message.tags == 'warning' %}⚠
                                {% else %}i{% endif %}
                            </span>
                            <div class="notification-content">
                                <div class="notification-title">
                                    {% if message.tags == 'success' %}
                                    {% elif message.tags == 'error' %}Ошибка
                                    {% elif message.tags == 'warning' %}
                                    {% else %}{% endif %}
                                </div>
                                <div class="notification-message">{{ message }}</div>
                            </div>
                            <span class="notification-close">×</span>
                        </div>
            {% endfor %}
        </div>

        {% block content %}{% endblock %}
        {% block scripts %} {% endblock %}
        {% block extra_head %} {% endblock %} 

<script src="{% static 'store/js/base.js' %}" defer></script>

</main>

<!-- В конце body -->
{% if not request.session.cookie_accepted %}
<div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #f1f1f1; padding: 15px; text-align: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <p>Мы используем cookies для улучшения работы сайта. Продолжая использовать сайт, вы соглашаетесь с нашей политикой.</p>
    <button id="accept-cookies" style="padding: 5px 15px; background:rgb(225, 147, 46); color: white; border: none; cursor: pointer;">Принять</button>
</div>
{% endif %}

<script>
document.getElementById('accept-cookies').addEventListener('click', function() {
    fetch('/accept-cookies/', {
        method: 'GET',
        headers: {
            'X-Requested-With': 'XMLHttpRequest',
        },
    }).then(response => {
        if (response.ok) {
            document.getElementById('cookie-banner').style.display = 'none';
        }
    });
});
</script>

</body>
</html>